extends layout.pug
include utils.pug

//- need to pass in isNewFrom in router object
- const name = null;
- const description = null;
- const steps = null;
unless isNewForm
    - const name = recipe.name;
    - const description = recipe.description;
    - const steps = recipe.steps;


block content
    +validationErrorSummary(errors)
    form(action='/recipes', method='post')
        input(type='hidden', name='_csrf', value=csrfToken)

        //- need to updat all null to display fetched data for edit form
        +field('Recipe Name', 'name', null, 'text', 'Recipe Name' )
        +field('Description', 'description', null, 'textarea', 'Recipe description' )
        +field('Image URL', 'imageURL', null, 'text', 'URL' )

        div(class='qmi-list')
            div(class='qmi-row')
            +field('Quantity', 'quantity', null, 'number', 'Quantity' )
            label(for='measurement')= measurement
            select(name='measurement' id='measurement')
                //- need to pass in measurements in router object
                each measurement in measurements
                    option(value=measurement.type) measurement.type
            +field('Ingredient', 'ingredient', null, 'text', 'Ingredient' )

        +field('Cooking Steps', 'steps', null, 'textarea', 'Steps' )
        button(type='submit') Submit

mixin field(labelText, fieldName, fieldValue, fieldType = 'text', placeholder = null)
  div
    label(for=fieldName)= labelText
    if fieldType === 'textarea'
      textarea(id=fieldName name=fieldName class='form-control' rows='5')= fieldValue
    else
      input(type=fieldType id=fieldName name=fieldName value=fieldValue placeholder=placeholder class='form-control')
