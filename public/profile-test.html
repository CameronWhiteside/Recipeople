<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' href='./stylesheets/index.css'>
    <title>Document</title>
</head>
<body>
    <div class="profile-image-selection">
        <div>
            <div class="image-option img-01" data-color="#A33C2E" data-url='https://i.ibb.co/SByphfy/default-01.jpg'></div>
            <div class="image-option img-02" data-color="#769B46" data-url='https://i.ibb.co/pdmX5HY/default-02.jpg'></div>
            <div class="image-option img-03" data-color="#605F47" data-url='https://i.ibb.co/WBQHs9z/default-03.jpg'></div>
        </div>
        <div>
            <div class="image-option img-04" data-color="#D74433" data-url='https://i.ibb.co/jJ7dKN8/default-04.jpg'></div>
            <div class="image-option img-05" data-color="#B1D483" data-url='https://i.ibb.co/F5Vz20r/default-05.jpg'></div>
            <div class="image-option img-06" data-color="#D69223" data-url='https://i.ibb.co/x1QRnVw/default-06.jpg'></div>
        </div>
        <div>
            <div class="image-option img-07" data-color="#ED773B" data-url='https://i.ibb.co/xhCQPdW/default-07.jpg'></div>
            <div class="image-option img-08" data-color="#FFC439" data-url='https://i.ibb.co/hs889VJ/default-08.jpg'></div>
            <div class="image-option img-09" data-color="#FC9C97" data-url='https://i.ibb.co/K0gMGCP/default-09.jpg'></div>
        </div>

        <form action=`/users/${user.id}/image/new` method='post'>
            <input type='hidden', name='_csrf', value=csrfToken>
            <label for="url"><Enter an https:// URL:</label>
            <input type="url" name="url" id="url" value=user.Image.url>
            <button type='submit'>Submit</button>
        </form>

    </div>
    <div class="highlight"></div>

    <script>

let highlight = document.querySelector(".highlight");
let urlInput = document.querySelector("input#url")
let imageOption = document.querySelectorAll(".image-option");

urlInput.addEventListener('click', (e) => {
    e.target.value = ''
    e.target.setAttribute(
        "style",
        `color: #56423e`
    )

    highlight.setAttribute(
        "style",
        `display: hidden`
    )
})

imageOption.forEach((option) => {
    option.addEventListener("click", (e) => {
        let x = e.target.offsetLeft - 15;
        let y = e.target.offsetTop - 15;
        let border = e.target.dataset.color;
        highlight.setAttribute(
            "style",
            `--x: ${x}px; --y: ${y}px; --border: ${border}`
        );
        highlight.setAttribute(
            "border",
            `10px solid ${border}`
        );
        urlInput.value = e.target.dataset.url
        urlInput.setAttribute(
            "style",
            `color: white`
        )

    });

    let x = imageOption[0].offsetLeft - 15;
    let y = imageOption[0].offsetTop - 15;
    let border = imageOption[0].dataset.color;

    highlight.setAttribute(
        "style",
        `--x: ${x}px; --y: ${y}px; --border: ${border}`
    );
});
    </script>
</body>
</html>
